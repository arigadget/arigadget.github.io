<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>Get Your Raspberry Pi Working - Donkey Car(JP)</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="https://fonts.googleapis.com/earlyaccess/notosansjp.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:600,800" rel="stylesheet">
  <link href="../../../css/custom.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Get Your Raspberry Pi Working";
    var mkdocs_page_input_path = "guide\\robot_sbc\\setup_raspberry_pi.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> Donkey Car(JP)</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../../..">About Donkey&reg;</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../contribute/">Contribute to Donkey</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../faq/">FAQ</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../legacy/">Legacy</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../release/">Release notes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../roll_your_own/">Roll Your Own Car</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../supported_cars/">Supported cars</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../tests/">Tests</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Guide</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../build_hardware/">How to Build a Donkey&reg;</a>
                </li>
                <li class="">
                    
    <a class="" href="../../calibrate/">Calibrate your Car</a>
                </li>
                <li class="">
                    
    <a class="" href="../../create_application/">Create your car application</a>
                </li>
                <li class="">
                    
    <a class="" href="../../get_driving/">Drive your car</a>
                </li>
                <li class="">
                    
    <a class="" href="../../install_software/">Install software</a>
                </li>
                <li class="">
                    
    <a class="" href="../../simulator/">Donkey Simulator</a>
                </li>
                <li class="">
                    
    <a class="" href="../../train_autopilot/">Train an autopilot with Keras</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Host pc</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../host_pc/setup_mac/">Setup mac</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../host_pc/setup_ubuntu/">Install Donkeycar on Linux</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../host_pc/setup_windows/">Setup windows</a>
                </li>
    </ul>
                </li>
                <li class=" current">
                    
    <span class="caption-text">Robot sbc</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../setup_jetson_nano/">Get Your Jetson Nano Working</a>
                </li>
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">Get Your Raspberry Pi Working</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#get-your-raspberry-pi-working">Get Your Raspberry Pi Working</a></li>
    
        <ul>
        
            <li><a class="toctree-l5" href="#step-1-flash-operating-system">Step 1: Flash Operating System</a></li>
        
            <li><a class="toctree-l5" href="#step-2-setup-the-wifi-for-first-boot">Step 2: Setup the WiFi for first boot</a></li>
        
            <li><a class="toctree-l5" href="#step-3-setup-pis-hostname">Step 3: Setup Pi's Hostname</a></li>
        
            <li><a class="toctree-l5" href="#step-4-enable-ssh-on-boot">Step 4: Enable SSH on Boot</a></li>
        
            <li><a class="toctree-l5" href="#step-5-connecting-to-the-pi">Step 5: Connecting to the Pi</a></li>
        
            <li><a class="toctree-l5" href="#step-6-update-and-upgrade">Step 6: Update and Upgrade</a></li>
        
            <li><a class="toctree-l5" href="#step-7-raspi-config">Step 7: Raspi-config</a></li>
        
            <li><a class="toctree-l5" href="#step-8-install-dependencies">Step 8: Install Dependencies</a></li>
        
            <li><a class="toctree-l5" href="#step-9-install-optional-opencv-dependencies">Step 9: Install Optional OpenCV Dependencies</a></li>
        
            <li><a class="toctree-l5" href="#step-10-setup-virtual-env">Step 10: Setup Virtual Env</a></li>
        
            <li><a class="toctree-l5" href="#step-11-install-donkeycar-python-code">Step 11: Install Donkeycar Python Code</a></li>
        
            <li><a class="toctree-l5" href="#step-12-install-optional-opencv">Step 12: Install Optional OpenCV</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../tensorrt_jetson_nano/">A Guide to using TensorRT on the Nvidia Jetson Nano</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Parts</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../parts/about/">What is a Part</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../parts/actuators/">Acutators</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../parts/controllers/">Controller Parts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../parts/imu/">IMU</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../parts/keras/">Keras Parts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../parts/stores/">Stores</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Utility</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../utility/donkey/">Donkey Command-line Utilities</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">Donkey Car(JP)</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Robot sbc &raquo;</li>
        
      
        
          <li>Guide &raquo;</li>
        
      
    
    <li>Get Your Raspberry Pi Working</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="get-your-raspberry-pi-working">Get Your Raspberry Pi Working</h1>
<p><img alt="donkey" src="/assets/logos/rpi_logo.png" /></p>
<ul>
<li><a href="#step-1-flash-operating-system">Step 1: Flash Operating System</a></li>
<li><a href="#step-2-setup-the-wifi-for-first-boot">Step 2: Setup the WiFi for First Boot</a></li>
<li><a href="#step-3-setup-pis-hostname">Step 3: Setup Pi's Hostname</a></li>
<li><a href="#step-4-enable-ssh-on-boot">Step 4: Enable SSH on Boot</a></li>
<li><a href="#step-5-connecting-to-the-pi">Step 5: Connecting to the Pi</a></li>
<li><a href="#step-6-update-and-upgrade">Step 6: Update and Upgrade</a></li>
<li><a href="#step-7-raspi-config">Step 7: Raspi-config</a></li>
<li><a href="#step-8-install-dependencies">Step 8: Install Dependencies</a></li>
<li><a href="#step-9-install-optional-opencv-dependencies">Step 9: Install Optional OpenCV Dependencies</a></li>
<li><a href="#step-10-setup-virtual-env">Step 10: Setup Virtual Env</a></li>
<li><a href="#step-11-install-donkeycar-python-code">Step 11: Install Donkeycar Python Code</a></li>
<li><a href="#step-12-install-optional-opencv">Step 12: Install Optional OpenCV</a></li>
<li>Then <a href="/guide/create_application/">Create your Donkeycar Application</a></li>
</ul>
<h2 id="step-1-flash-operating-system">Step 1: Flash Operating System</h2>
<p>You need to flash a micro SD image with an operating system.</p>
<ol>
<li>Download <a href="https://downloads.raspberrypi.org/raspbian_lite/images/raspbian_lite-2019-04-09/2019-04-08-raspbian-stretch-lite.zip">Raspian Lite(Stretch)</a> (352MB). </li>
<li>Follow OS specific guides <a href="https://www.raspberrypi.org/documentation/installation/installing-images/">here</a>.</li>
<li>Leave micro SD card in your machine and edit/create some files as below:</li>
</ol>
<h2 id="step-2-setup-the-wifi-for-first-boot">Step 2: Setup the WiFi for first boot</h2>
<p>We can create a special file which will be used to login to wifi on first boot. More reading <a href="https://raspberrypi.stackexchange.com/questions/10251/prepare-sd-card-for-wifi-on-headless-pi">here</a>, but we will walk you through it. </p>
<p>On Windows, with your memory card image burned and memory disc still inserted, you should see two drives, which are actually two partitions on the mem disc. One is labeled <strong>boot</strong>. On Mac and Linux, you should also have access to the <strong>boot</strong> partition of the mem disc. This is formatted with the common FAT type and is where we will edit some files to help it find and log-on to your wifi on its first boot. </p>
<blockquote>
<p>Note: If <strong>boot</strong> is not visible right away, try unplugging and re-inserting the memory card reader.</p>
</blockquote>
<ul>
<li>Start a text editor: <code>gedit</code> on Linux. Notepad++ on Windows. TextEdit on a Mac.</li>
<li>Paste and edit this contents to match your wifi, adjust as needed:</li>
</ul>
<pre><code class="text">country=US
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1

network={
    ssid=&quot;&lt;your network name&gt;&quot;
    psk=&quot;&lt;your password&gt;&quot;
}

</code></pre>

<p>Replace <code>&lt;your network name&gt;</code> with the ID of your network. Leave the quotes. I've seen problems when the network name contained an apostrophe, like "Joe's iPhone".
Replace <code>&lt;your password&gt;</code> with your password, leaving it surrounded by quotes. 
If it bothers you to leave your password unencrypted, you may change the <a href="https://unix.stackexchange.com/questions/278946/hiding-passwords-in-wpa-supplicant-conf-with-wpa-eap-and-mschap-v2">contents later</a> once you've gotten the pi to boot and log-in.</p>
<ul>
<li>Save this file to the root of <strong>boot</strong> partition with the filename <code>wpa_supplicant.conf</code>. On first boot, this file will be moved to <code>/etc/wpa_supplicant/wpa_supplicant.conf</code> where it may be edited later. If you are using Notepad on Windows, make sure it doesn't have a .txt at the end.</li>
</ul>
<h2 id="step-3-setup-pis-hostname">Step 3: Setup Pi's Hostname</h2>
<blockquote>
<p>Note: This step only possible on a linux host pc. Otherwise you can set it up later in raspi-config after logging in to your pi.</p>
</blockquote>
<p>We can also setup the hostname so that your Pi easier to find once on the network. If yours is the only Pi on the network, then you can find it with </p>
<pre><code class="bash">ping raspberrypi.local
</code></pre>

<p>once it's booted. If there are many other Pi's on the network, then this will have problems. If you are on a Linux machine, or are able to edit the UUID partition, then you can edit the <code>/etc/hostname</code> and <code>/etc/hosts</code> files now to make finding your pi on the network easier after boot. Edit those to replace <code>raspberrypi</code> with a name of your choosing. Use all lower case, no special characters, no hyphens, yes underscores <code>_</code>. </p>
<pre><code class="bash">sudo vi /media/userID/UUID/etc/hostname
sudo vi /media/userID/UUID/etc/hosts
</code></pre>

<h2 id="step-4-enable-ssh-on-boot">Step 4: Enable SSH on Boot</h2>
<p>Put a file named <strong>ssh</strong> in the root of your <strong>boot</strong> partition.</p>
<p>Now your SD card is ready. Eject it from your computer, put it in the Pi 
and plug in the Pi.</p>
<h2 id="step-5-connecting-to-the-pi">Step 5: Connecting to the Pi</h2>
<p>If you followed the above instructions to add wifi access, your Pi should
now be connected to your wifi network. Now you need to find its IP address
so you can connect to it via SSH. </p>
<p>The easiest way (on Ubuntu) is to use the <code>findcar</code> donkey command. You can try <code>ping raspberrypi.local</code>. If you've modified the hostname, then you should try: <code>ping &lt;your hostname&gt;.local</code>. This will fail on a windows machine. Windows users will need the full IP address (unless using cygwin). </p>
<p>If you are having troubles locating your Pi on the network, you will want to plug in an HDMI monitor and USB keyboard into the Pi. Boot it. Login with:</p>
<ul>
<li>Username: <strong>pi</strong></li>
<li>Password: <strong>raspberry</strong></li>
</ul>
<p>Then try the command:</p>
<pre><code class="bash">ifconfig wlan0
</code></pre>

<p>If this has a valid IPv4 address, 4 groups of numbers separated by dots, then you can try that with your SSH command. If you don't see anything like that, then your wifi config might have a mistake. You can try to fix with</p>
<pre><code class="bash">sudo nano /etc/wpa_supplicant/wpa_supplicant.conf
</code></pre>

<p>If you don't have a HDMI monitor and keyboard, you can plug-in the Pi with a CAT5 cable to a router with DHCP. If that router is on the same network as your PC, you can try:</p>
<pre><code class="bash">ping raspberrypi.local
</code></pre>

<p>Hopefully, one of those methods worked and you are now ready to SSH into your Pi. On Mac and Linux, you can open Terminal. On Windows you can install <a href="http://www.putty.org/">Putty</a>, <a href="https://www.htpcbeginner.com/best-ssh-clients-windows-putty-alternatives/2/">one of the alternatives</a>, or on Windows 10 you may have ssh via the command prompt.</p>
<p>If you have a command prompt, you can try:</p>
<pre><code class="bash">ssh pi@raspberrypi.local
</code></pre>

<p>or</p>
<pre><code class="bash">ssh pi@&lt;your pi ip address&gt;
</code></pre>

<p>or via Putty.</p>
<ul>
<li>Username: <strong>pi</strong></li>
<li>Password: <strong>raspberry</strong></li>
<li>Hostname:<code>&lt;your pi IP address&gt;</code></li>
</ul>
<h2 id="step-6-update-and-upgrade">Step 6: Update and Upgrade</h2>
<pre><code class="bash">sudo apt-get update
sudo apt-get upgrade
</code></pre>

<h2 id="step-7-raspi-config">Step 7: Raspi-config</h2>
<pre><code class="bash">sudo raspi-config
</code></pre>

<ul>
<li>change default password for pi</li>
<li>change hostname</li>
<li>enable Interfacing Options | I2C</li>
<li>enable Interfacing Options | Camera</li>
<li>Advanced Options | Exapand Filesystem</li>
</ul>
<p>Choose <code>&lt;Finish&gt;</code> and hit enter.</p>
<blockquote>
<p>Note: Reboot after changing these settings. Should happen if you say yes.</p>
</blockquote>
<h2 id="step-8-install-dependencies">Step 8: Install Dependencies</h2>
<pre><code class="bash">sudo apt-get install build-essential python3 python3-dev python3-pip python3-virtualenv python3-numpy python3-picamera python3-pandas python3-rpi.gpio i2c-tools avahi-utils joystick libopenjp2-7-dev libtiff5-dev gfortran libatlas-base-dev libopenblas-dev libhdf5-serial-dev git ntp
</code></pre>

<h2 id="step-9-install-optional-opencv-dependencies">Step 9: Install Optional OpenCV Dependencies</h2>
<p>If you are going for a minimal install, you can get by without these. But it can be handy to have OpenCV.</p>
<pre><code class="bash">sudo apt-get install libilmbase-dev libopenexr-dev libgstreamer1.0-dev libjasper-dev libwebp-dev libatlas-base-dev libavcodec-dev libavformat-dev libswscale-dev libqtgui4 libqt4-test
</code></pre>

<h2 id="step-10-setup-virtual-env">Step 10: Setup Virtual Env</h2>
<pre><code class="bash">python3 -m virtualenv -p python3 env --system-site-packages
echo &quot;source env/bin/activate&quot; &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre>

<p>Modifying your <code>.bashrc</code> in this way will automatically enable this environment each time you login. To return to the system python you can type <code>deactivate</code>.</p>
<h2 id="step-11-install-donkeycar-python-code">Step 11: Install Donkeycar Python Code</h2>
<ul>
<li>Change to a dir you would like to use as the head of your projects.</li>
</ul>
<pre><code class="bash">mkdir projects
cd projects
</code></pre>

<ul>
<li>Get the latest donkeycar from Github.</li>
</ul>
<pre><code class="bash">git clone https://github.com/autorope/donkeycar
cd donkeycar
git checkout master
pip install -e .[pi]
pip install tensorflow==1.13.1
</code></pre>

<p>You can validate your tensorflow install with</p>
<pre><code class="bash">python -c &quot;import tensorflow&quot;
</code></pre>

<p>Warnings like this are normal:</p>
<pre><code class="text">/home/pi/env/lib/python3.5/importlib/_bootstrap.py:222: RuntimeWarning: compiletime version 3.4 of module 'tensorflow.python.framework.fast_tensor_util' does not match runtime version 3.5
  return f(*args, **kwds)
/home/pi/env/lib/python3.5/importlib/_bootstrap.py:222: RuntimeWarning: builtins.type size changed, may indicate binary incompatibility. Expected 432, got 412
  return f(*args, **kwds)
</code></pre>

<p>Note: If you would like to try tflite support, you will need a newer version of Tensorflow. You can download and install this version:</p>
<p>For Pi3 Raspian Stretch:</p>
<pre><code class="bash">wget https://tawn-train.s3.amazonaws.com/tf/tensorflow-2.0.0a0-cp35-cp35m-linux_armv7l.whl
pip install tensorflow-2.0.0a0-cp35-cp35m-linux_armv7l.whl
</code></pre>

<p>For Raspian Buster Python 3.7:
TF 2.0 Not yet available. Check <a href="http://donkeycar.slack.com">slack</a> for updates.</p>
<h2 id="step-12-install-optional-opencv">Step 12: Install Optional OpenCV</h2>
<p>If you've opted to install the OpenCV dependencies earlier, you can install Python OpenCV bindings now with</p>
<pre><code class="bash">sudo apt install python3-opencv
</code></pre>

<p>If that failed, you can try pip:</p>
<pre><code class="bash">pip install opencv-python
</code></pre>

<p>Then test to see if import succeeds.</p>
<pre><code class="bash">python -c &quot;import cv2&quot;
</code></pre>

<p>And if no errors, you have OpenCV installed!</p>
<hr />
<h3 id="next-create-your-donkeycar-application">Next, <a href="/guide/create_application/">create your Donkeycar application</a>.</h3>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tensorrt_jetson_nano/" class="btn btn-neutral float-right" title="A Guide to using TensorRT on the Nvidia Jetson Nano">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../setup_jetson_nano/" class="btn btn-neutral" title="Get Your Jetson Nano Working"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../setup_jetson_nano/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../tensorrt_jetson_nano/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>

</body>
</html>
